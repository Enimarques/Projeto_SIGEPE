{% extends 'base.html' %}
{% load static %}

{% block title %}Visita Finalizada{% endblock %}

{% block extra_css %}
<style>
body, html {
  min-height: 100vh;
  background: linear-gradient(135deg, #4f8cff 0%, #7b2ff2 100%);
  font-size: 18px;
}
.totem-card {
  max-width: 480px;
  width: 98vw;
  margin: 2rem auto;
  border-radius: 2rem;
  box-shadow: 0 8px 32px rgba(44, 62, 80, 0.15);
  padding: 2rem 1.5rem;
  background: #fff;
  display: flex;
  flex-direction: column;
  align-items: center;
}
button, .main-action-btn {
  min-width: 180px;
  min-height: 56px;
  font-size: 1.2rem;
  border-radius: 2rem;
}
.success-icon {
  font-size: 80px;
  color: #28a745;
  margin-bottom: 30px;
}
.card-header {
  background-color: #28a745;
  color: white;
  border-radius: 1.5rem 1.5rem 0 0;
}
.countdown {
  font-size: 24px;
  font-weight: bold;
  margin: 20px 0;
}
@media (max-width: 900px) {
  .totem-card { max-width: 98vw; }
}
@media (max-width: 600px) {
  .totem-card { padding: 1rem 0.5rem; }
}
</style>
{% endblock %}

{% block content %}
<div class="totem-card">
  <div class="card shadow w-100" style="border-radius:1.5rem;">
    <div class="card-header">
      <h3 class="mb-0"><i class="fas fa-check-circle me-2"></i>Visita Finalizada</h3>
    </div>
    <div class="card-body text-center">
      <i class="fas fa-check-circle success-icon"></i>
      <h2 class="mb-4">Sua visita foi finalizada com sucesso!</h2>
      <div class="alert alert-success">
        <h4>{{ visitante.nome_completo }}</h4>
        <p>CPF: {{ visitante.CPF }}</p>
        <p>{{ visitas_finalizadas }} visita(s) finalizada(s) com sucesso.</p>
      </div>
      <p class="mb-4">Obrigado por visitar a Câmara Municipal de Parauapebas!</p>
      <div class="countdown" id="countdown">Redirecionando em 10 segundos</div>
      <div class="mt-4">
        <a href="{% url 'recepcao:totem_home' %}" class="btn btn-success btn-lg w-100" style="font-size:1.2rem;min-height:56px;">
          <i class="fas fa-home me-2"></i>Voltar ao Início
        </a>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    let secondsLeft = 10;
    const countdownElement = document.getElementById('countdown');
    
    const countdownInterval = setInterval(function() {
        secondsLeft--;
        countdownElement.innerText = `Redirecionando em ${secondsLeft} segundo${secondsLeft !== 1 ? 's' : ''}`;
        
        if (secondsLeft <= 0) {
            clearInterval(countdownInterval);
            window.location.href = "{% url 'recepcao:totem_home' %}";
        }
    }, 1000);
});
</script>
{% endblock %} 